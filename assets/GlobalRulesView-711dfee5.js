import{f as S,c as F,d as Z,g as E,u as T,s as G,b as D,e as ee,n as B,_ as le}from"./divider.esm-4e1f8540.js";import{s as $,a as K}from"./v4-495bc8f0.js";import{J as w,o as u,u as b,w as _,i as k,a as e,c as h,b as I,F as P,M as n,j as c,p as C,L as g,n as A,t as j,I as L,a4 as te,e as V,r as N,g as se,m as z,y as ae,N as oe,P as ne,_ as O,K as de}from"./index-79d3e87e.js";const ie={class:"flex flex-column gap-2"},ue={class:"flex-column"},ce={class:"grid p-fluid align-items-center"},re={class:"col-12 md:col-3"},pe={class:"p-inputgroup"},me=e("span",{class:"p-inputgroup-addon"},"Field",-1),ve={class:"col-12 md:col-8"},_e={class:"flex flex-column"},he=w({__name:"RuleMatch",props:{modelValue:null},emits:["update:modelValue"],setup(a,{emit:d}){const t=a,p=(s,o)=>{const l=t.modelValue;l[o]=l[s],delete l[s]},i=(s,o,l)=>{const r=t.modelValue[s];Z(r)?r.splice(o,1,l):t.modelValue[s]=l},m=s=>{console.log("appending ",s);const o=t.modelValue[s],l=F(o)?[o]:o;l.push("");let r=t.modelValue;r[s]=l,d("update:modelValue",r)};return(s,o)=>(u(),b(n(S),null,{title:_(()=>[k("Match")]),content:_(()=>[e("div",ie,[(u(!0),h(P,null,I(t.modelValue,(l,r)=>(u(),h("div",ue,[e("div",ce,[e("div",re,[e("div",pe,[me,c(n(C),{value:r,type:"text","onUpdate:modelValue":v=>p(r,v)},null,8,["value","onUpdate:modelValue"])])]),e("div",ve,[e("div",_e,[n(F)(l)?(u(),b(n(C),{key:0,class:"flex-row",value:l,type:"text","onUpdate:modelValue":v=>i(r,-1,v)},null,8,["value","onUpdate:modelValue"])):(u(!0),h(P,{key:1},I(l,(v,R)=>(u(),b(n(C),{class:"flex-row",value:v,type:"text","onUpdate:modelValue":f=>i(r,R,f)},null,8,["value","onUpdate:modelValue"]))),256)),c(n($),{label:"Add new value",class:"p-button-success",onClick:v=>m(r)},null,8,["onClick"])])])])]))),256))])]),_:1}))}}),fe={class:"grid p-fluid align-items-center"},be={class:"col-12 md:col-3"},ge={class:"p-inputgroup"},ye=e("span",{class:"p-inputgroup-addon"},"Field",-1),Ve={class:"col-12 md:col-4"},xe={class:"p-inputgroup"},$e=e("span",{class:"p-inputgroup-addon"},"This",-1),Ce={class:"col-12 md:col-4 align-items-center"},we={class:"p-inputgroup"},Re=e("span",{class:"p-inputgroup-addon"},"With",-1),ke=["onClick"],Ue={class:"col-12 md:col-4"},Se=w({__name:"RuleReplace",props:{modelValue:null},emits:["update:modelValue"],setup(a,{emit:d}){const t=a,p=(l,r)=>{t.modelValue[r].field=l},i=(l,r)=>{t.modelValue[r].this=l},m=(l,r)=>{t.modelValue[r].with=l},s=l=>{t.modelValue.splice(l,1)},o=()=>{t.modelValue.push({with:"",this:"",field:""})};return(l,r)=>(u(),b(n(S),null,{title:_(()=>[k("Replacements")]),content:_(()=>[(u(!0),h(P,null,I(t.modelValue,(v,R)=>(u(),h("div",fe,[e("div",be,[e("div",ge,[ye,c(n(C),{modelValue:v.field,"onUpdate:modelValue":[f=>v.field=f,f=>p(f,R)],autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",Ve,[e("div",xe,[$e,c(n(C),{modelValue:v.this,"onUpdate:modelValue":[f=>v.this=f,f=>i(f,R)],autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",Ce,[e("div",we,[Re,c(n(C),{modelValue:v.with,"onUpdate:modelValue":[f=>v.with=f,f=>m(f,R)],autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])]),e("i",{class:"pi pi-times",style:{color:"var(--red-400)"},onClick:f=>s(R)},null,8,ke)]))),256)),e("div",Ue,[c(n($),{label:"Add",onClick:o})])]),_:1}))}}),Ae={class:"grid p-fluid align-items-center"},Be={class:"col-12 md:col-4"},Ie={class:"p-inputgroup"},Pe=e("span",{class:"p-inputgroup-addon"},"discard event?",-1),Te=w({__name:"RuleDiscard",props:{modelValue:{type:Boolean}},emits:["update:modelValue","remove"],setup(a,{emit:d}){const t=a,p=g([{label:"Keep",value:!1},{label:"Discard",value:!0}]),i=s=>{d("update:modelValue",s)},m=()=>{d("remove")};return(s,o)=>(u(),h("div",Ae,[e("div",Be,[e("div",Ie,[Pe,c(n(E),{class:"rule-discard mr-3",modelValue:t.modelValue,"onUpdate:modelValue":[o[0]||(o[0]=l=>t.modelValue=l),i],options:p.value,"option-label":"label","option-value":"value"},{option:_(l=>[e("div",{class:A(`rule-discard-${l.option.value}`)},j(l.option.label),3)]),_:1},8,["modelValue","options"]),e("i",{class:"pi pi-times",style:{color:"var(--red-400)"},onClick:m})])])]))}}),je={class:"grid p-fluid align-items-center"},De={class:"col-12 md:col-3"},Ge={class:"p-inputgroup"},Ne=e("span",{class:"p-inputgroup-addon"},"Field",-1),Me={class:"col-12 md:col-4"},Fe={class:"p-inputgroup"},Ke=e("span",{class:"p-inputgroup-addon"},"To",-1),ze=w({__name:"RuleSet",props:{modelValue:null},setup(a){const d=a,t=L(()=>Object.keys(d.modelValue).map(s=>({key:s,value:d.modelValue[s]}))),p=(s,o)=>{const l=d.modelValue[s];delete d.modelValue[s],d.modelValue[o]=l},i=(s,o)=>{d.modelValue[s]=o},m=()=>{console.log("adding value"),d.modelValue.hhh="xxxx"};return(s,o)=>(u(),b(n(S),null,{title:_(()=>[k("Set")]),content:_(()=>[(u(!0),h(P,null,I(n(t),(l,r)=>(u(),h("div",je,[e("div",De,[e("div",Ge,[Ne,c(n(C),{class:A(`idx-${r}`),value:l.key,type:"text","onUpdate:modelValue":v=>p(l.key,v)},null,8,["class","value","onUpdate:modelValue"])])]),e("div",Me,[e("div",Fe,[Ke,c(n(C),{value:l.value,type:"text","onUpdate:modelValue":v=>i(l.key,v)},null,8,["value","onUpdate:modelValue"])])])]))),256)),c(n($),{label:"Add new value",class:"p-button-success",onClick:m})]),_:1}))}}),Ee={class:"grid p-fluid align-items-center"},Le={class:"col-12 md:col-4"},Oe={class:"p-inputgroup"},We=e("span",{class:"p-inputgroup-addon"},"stop processing?",-1),He=w({__name:"RuleStop",props:{modelValue:{type:Boolean}},emits:["update:modelValue","remove"],setup(a,{emit:d}){const t=a,p=g([{label:"UnStop",value:!1},{label:"Stop",value:!0}]),i=s=>{d("update:modelValue",s)},m=()=>{d("remove")};return(s,o)=>(u(),h("div",Ee,[e("div",Le,[e("div",Oe,[We,c(n(E),{class:"rule-discard mr-3",modelValue:t.modelValue,"onUpdate:modelValue":[o[0]||(o[0]=l=>t.modelValue=l),i],options:p.value,"option-label":"label","option-value":"value"},{option:_(l=>[e("div",{class:A(`rule-discard-${l.option.value}`)},j(l.option.label),3)]),_:1},8,["modelValue","options"]),e("i",{class:"pi pi-times",style:{color:"var(--red-400)"},onClick:m})])])]))}}),Je={class:"flex-column mx-4"},Qe=e("div",{class:"pb-2"},"Select events where...",-1),qe=e("div",{class:"pb-2"},"Then...",-1),Xe={class:"flex justify-content-end"},Ye=w({__name:"RuleEdit",props:{rule:null},emits:["update:modelValue","cancel"],setup(a,{emit:d}){const t=a,p=te(),i=g(t.rule.set),m=L(()=>i.value!==void 0?Boolean(Object.length):!1),s=g(t.rule.discard),o=g(t.rule.replace),l=g(t.rule.stop),r=g(t.rule.match),v=T(),R=g([{label:"Match",command:()=>{r.value===void 0?r.value={"":""}:r.value[""]=[""]}}]);g([{name:"After Group",value:!0},{name:"Unstop Group",value:!1}]);const f=()=>{var y;let U=((y=o.value)==null?void 0:y.filter(x=>x.field))||void 0;d("update:modelValue",{...t.rule,discard:s.value,stop:l.value,replace:U,match:r.value}),p.add({severity:"success",summary:"Rule updated",detail:"Message Content",group:"tr",life:3e3})},J=()=>{s.value=t.rule.discard,o.value=t.rule.replace,l.value=t.rule.stop,r.value=t.rule.match,d("cancel"),p.add({severity:"info",summary:"Rule cancelled",detail:"Message Content",group:"tr",life:3e3})},Q=()=>{v.deleteRule(t.rule.uuid),p.add({severity:"warn",summary:"Rule Deleted",detail:"Message Content",group:"tr",life:3e3})},q=()=>{s.value=void 0},X=()=>{l.value=void 0},Y=g([{label:"discard",disabled:()=>s.value===!0,command:()=>{s.value=!0}},{label:"replace",command:()=>{const U={field:"",this:"",with:""};Array.isArray(o.value)?o.value.push(U):o.value=[U]}},{label:"set",disabled:()=>m.value,command:()=>{i.value===void 0?i.value={"":""}:i.value[""]=""}},{label:"stop"},{label:"Stop After Group",command:()=>{l.value=!0}}]);return(U,y)=>(u(),h("div",Je,[Qe,c(n(K),{label:"Add Selector",model:R.value,class:"p-button-text p-button-sm"},null,8,["model"]),r.value?(u(),b(he,{key:0,"model-value":r.value},null,8,["model-value"])):V("",!0),c(n(G)),qe,c(n(K),{label:"Add Action",model:Y.value,class:"p-button-text p-button-sm"},null,8,["model"]),s.value!==void 0?(u(),b(Te,{key:1,modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=x=>s.value=x),onRemove:q},null,8,["modelValue"])):V("",!0),l.value!==void 0?(u(),b(He,{key:2,modelValue:l.value,"onUpdate:modelValue":y[1]||(y[1]=x=>l.value=x),onRemove:X},null,8,["modelValue"])):V("",!0),i.value!==void 0?(u(),b(ze,{key:3,modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=x=>i.value=x)},null,8,["modelValue"])):V("",!0),o.value!==void 0?(u(),b(Se,{key:4,modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=x=>o.value=x)},null,8,["modelValue"])):V("",!0),c(n(G)),e("div",Xe,[c(n($),{class:"mx-2 p-button-success",icon:"pi pi-check",label:"Update","icon-pos":"right",onClick:f}),c(n($),{class:"mx-2 p-button-info",icon:"pi pi-times",label:"Cancel","icon-pos":"right",onClick:J}),c(n($),{class:"mx-2 p-button-danger",icon:"pi pi-trash",label:"Delete","icon-pos":"right",onClick:Q})])]))}});var W={name:"Badge",props:{value:null,severity:null,size:null},computed:{containerClass(){return this.$slots.default?"p-overlay-badge":this.badgeClass},badgeClass(){return["p-badge p-component",{"p-badge-no-gutter":this.value&&String(this.value).length===1,"p-badge-dot":!this.value&&!this.$slots.default,"p-badge-lg":this.size==="large","p-badge-xl":this.size==="xlarge","p-badge-info":this.severity==="info","p-badge-success":this.severity==="success","p-badge-warning":this.severity==="warning","p-badge-danger":this.severity==="danger"}]}}};function Ze(a,d,t,p,i,m){return u(),h("span",{class:A(m.badgeClass)},[N(a.$slots,"default",{},()=>[k(j(t.value),1)])],2)}W.render=Ze;var H={name:"Inplace",emits:["open","close","update:active"],props:{closable:{type:Boolean,default:!1},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},closeIcon:{type:String,default:"pi pi-times"},displayProps:{type:null,default:null},closeButtonProps:{type:null,default:null}},data(){return{d_active:this.active}},watch:{active(a){this.d_active=a}},methods:{open(a){this.disabled||(this.$emit("open",a),this.d_active=!0,this.$emit("update:active",!0))},close(a){this.$emit("close",a),this.d_active=!1,this.$emit("update:active",!1),setTimeout(()=>{this.$refs.display.focus()},0)}},computed:{containerClass(){return["p-inplace p-component",{"p-inplace-closable":this.closable}]},displayClass(){return["p-inplace-display",{"p-disabled":this.disabled}]},closeAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{IPButton:$}};const el=["tabindex"],ll={key:1,class:"p-inplace-content"};function tl(a,d,t,p,i,m){const s=se("IPButton");return u(),h("div",{class:A(m.containerClass),"aria-live":"polite"},[i.d_active?(u(),h("div",ll,[N(a.$slots,"content"),t.closable?(u(),b(s,z({key:0,icon:t.closeIcon,"aria-label":m.closeAriaLabel,onClick:m.close},t.closeButtonProps),null,16,["icon","aria-label","onClick"])):V("",!0)])):(u(),h("div",z({key:0,ref:"display",class:m.displayClass,tabindex:a.$attrs.tabindex||"0",role:"button",onClick:d[0]||(d[0]=(...o)=>m.open&&m.open(...o)),onKeydown:d[1]||(d[1]=ae((...o)=>m.open&&m.open(...o),["enter"]))},t.displayProps),[N(a.$slots,"display")],16,el))],2)}function sl(a,d){d===void 0&&(d={});var t=d.insertAt;if(!(!a||typeof document>"u")){var p=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&p.firstChild?p.insertBefore(i,p.firstChild):p.appendChild(i),i.styleSheet?i.styleSheet.cssText=a:i.appendChild(document.createTextNode(a))}}var al=`
.p-inplace .p-inplace-display {
    display: inline;
    cursor: pointer;
}
.p-inplace .p-inplace-content {
    display: inline;
}
.p-fluid .p-inplace.p-inplace-closable .p-inplace-content {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
}
.p-fluid .p-inplace.p-inplace-closable .p-inplace-content > .p-inputtext {
    -webkit-box-flex: 1;
        -ms-flex: 1 1 auto;
            flex: 1 1 auto;
    width: 1%;
}
`;sl(al);H.render=tl;const M=a=>(oe("data-v-fc6d37d8"),a=a(),ne(),a),ol=M(()=>e("i",{class:"pi pi-pencil pr-1"},null,-1)),nl={class:"grid col mr-4"},dl={class:"flex col justify-content-between flex-wrap card-container purple-container"},il={class:"flex flex-column align-items-start justify-content-center font-bold text-white border-round"},ul={class:"flex flex-row align-items-center"},cl=M(()=>e("i",{class:"pi pi-bars mr-3 rule-sort-handle"},null,-1)),rl={key:0,class:"flex align-items-center flex-column sm:flex-row gap-2 mt-2 ml-4"},pl={class:"flex align-items-center justify-content-center font-bold text-white border-round"},ml={class:"flex flex-column"},vl={class:"flex"},_l=M(()=>e("div",{class:"flex text-xs"},"UUID:",-1)),hl=w({__name:"RulePanelAlt",props:{rule:null,index:null},setup(a){const d=a,t=T(),p=g(!0),i=s=>{t.save(s)},m=()=>{t.save(d.rule)};return(s,o)=>(u(),b(n(ee),{collapsed:p.value,"onUpdate:collapsed":o[1]||(o[1]=l=>p.value=l),toggleable:!0},{icons:_(()=>[ol]),header:_(()=>[e("div",nl,[e("div",dl,[e("div",il,[e("div",ul,[cl,c(n(H),{closable:!0,class:"text-2xl font-bold rule-name"},{display:_(()=>[k(j(a.rule.name),1)]),content:_(()=>[c(n(C),{modelValue:a.rule.name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.rule.name=l),autofocus:""},null,8,["modelValue"])]),_:1})]),p.value?(u(),h("div",rl,[a.rule.discard===!0?(u(),b(n(D),{key:0,class:"ev-discard text-xs",icon:"pi pi-circle-fill",label:"discard"})):V("",!0),a.rule.stop===!0?(u(),b(n(D),{key:1,class:"ev-stop text-xs",icon:"pi pi-circle-fill",label:"stop"})):V("",!0),Array.isArray(a.rule.replace)?(u(),b(n(D),{key:2,class:"ev-replace text-xs",icon:"pi pi-circle-fill",label:"replace"})):V("",!0)])):V("",!0)]),e("div",pl,[e("div",ml,[e("div",vl,[k(" Rule Hits: "),c(n(W),{class:"ml-1",value:"3",severity:"danger"})]),_l])])])])]),default:_(()=>[c(Ye,{rule:d.rule,"onUpdate:modelValue":i,onCancel:m},null,8,["rule"])]),_:1},8,["collapsed"]))}});const fl=O(hl,[["__scopeId","data-v-fc6d37d8"]]),bl=w({__name:"GlobalRules",setup(a){const d=T(),t={handle:".rule-sort-handle"};return g(!0),de(()=>{d.loadGlobalRules([B("global 1"),B("global 2"),B("global 3"),B("global 4")])}),(p,i)=>(u(),b(n(le),{list:n(d).globalOrderedRules,tag:"ul","item-key":"uuid",class:"ev-rules",options:t},{item:_(({element:m,index:s})=>[(u(),h("li",{class:"draggable p-tree-node pb-3",key:m.uuid},[c(fl,{rule:m,index:s},null,8,["rule","index"])]))]),_:1},8,["list"]))}});const gl=O(bl,[["__scopeId","data-v-b87d621e"]]),yl={class:"mx-8"},Vl=e("div",{class:"flex justify-content-between align-content-center"},[e("h1",null,"Global Rules"),e("div",null,"Total Rules: xx Rule hits: yy")],-1),xl={class:"grid relative"},$l={class:"col-4 align-content-end"},Cl={class:"flex flex-column justify-content-end"},Ul=w({__name:"GlobalRulesView",setup(a){const d=T(),t=()=>{d.addRule("new rule")};return(p,i)=>(u(),h("div",yl,[Vl,c(n(G)),e("div",xl,[c(gl,{class:"col-8"}),e("div",$l,[e("div",Cl,[c(n(S),{style:{width:"24rem"},class:"border-1 my-3 border-round"},{title:_(()=>[k("Quick Actions ")]),content:_(()=>[c(n($),{label:"Create Rule",class:"p-button-success",onClick:t})]),_:1}),c(n(S),{style:{width:"24rem"},class:"border-1 my-3 border-round"},{title:_(()=>[k("Search rules")]),content:_(()=>[c(n($),{label:"Search Rule"})]),_:1})])])])]))}});export{Ul as default};
