import{a as h,s as N,b as q,c as A,d as D,_ as L}from"./Rule.vue_vue_type_script_setup_true_lang-4672f86b.js";import{e as O,a as y,_ as j,f as H,g as J,s as K}from"./divider.esm-4e1f8540.js";import{J as $,H as T,o as i,u as v,k as z,w as r,a as x,i as g,t as _,c as m,e as c,j as d,M as n,p as b,L as R,I as Q,b as W,F as X,K as Y}from"./index-79d3e87e.js";import{a as Z,v as V,s as ee}from"./v4-495bc8f0.js";const le=$({__name:"RulePanel",props:{rule:null},setup(k){const u=k,e=T({editTitle:!1,showPencil:!1});return(f,o)=>(i(),v(n(O),{collapsed:!0,toggleable:!0},z({default:r(()=>[d(h,{rule:u.rule},null,8,["rule"])]),_:2},[e.editTitle?{name:"header",fn:r(()=>[d(n(b),{value:u.rule.name,type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>u.rule.name=a),onFocusout:o[5]||(o[5]=a=>e.editTitle=!1)},null,8,["value"])]),key:"1"}:{name:"header",fn:r(()=>[x("div",{onDblclick:o[1]||(o[1]=a=>e.editTitle=!0),onMouseover:o[2]||(o[2]=a=>e.showPencil=!0),onMouseleave:o[3]||(o[3]=a=>e.showPencil=!1)},[g(_(u.rule.name)+" ",1),e.showPencil?(i(),m("i",{key:0,class:"pi pi-pencil",onClick:o[0]||(o[0]=a=>e.editTitle=!e.editTitle)})):c("",!0)],32)]),key:"0"}]),1024))}}),se=$({__name:"GroupRule",props:{rule:null},emits:["save"],setup(k,{emit:u}){const e=k,f=y(),o=R([{label:"off",value:!1},{label:"on",value:!0}]),a=T({editTitle:!1,showPencil:!1}),P=R([{label:"Add Rule",icon:"pi pi-plus",command:l=>{f.addRuleToGroup(e.rule.uuid)}}]),w=Q(()=>{let l=[];return e.rule.all!==void 0&&l.push({all:e.rule.all}),e.rule.equals!==void 0&&l.push({equals:e.rule.equals}),e.rule.missing!==void 0&&l.push({missing:e.rule.missing}),e.rule.exists!==void 0&&l.push({exists:e.rule.exists}),e.rule.match!==void 0&&l.push({match:e.rule.match}),l}),G=(l,s)=>{f.moveRuleInGroup(l,s.oldIndex,s.newIndex)},U=l=>{let s={...e.rule,missing:l};console.log("Saving",s),u("save",s)},S=l=>{let s={...e.rule,exists:l};console.log("Saving",s),u("save",s)},M=l=>{let s={...e.rule,match:l};console.log("Saving match",s),u("save",s)},C=()=>{let l={...e.rule};delete l.exists,u("save",l)},E=()=>{let l={...e.rule};delete l.missing,u("save",l)},I=l=>{e.rule.name=l},B=()=>{a.editTitle=a.editTitle===!1},F=l=>{console.log("LOG",l)};return(l,s)=>e.rule?(i(),v(n(H),{key:0},{title:r(()=>[a.editTitle?(i(),v(n(b),{key:1,value:e.rule.name,type:"text","onUpdate:modelValue":I,onFocusout:s[3]||(s[3]=t=>a.editTitle=!1)},null,8,["value"])):(i(),m("div",{key:0,onDblclick:s[0]||(s[0]=t=>a.editTitle=!0),onPointerover:s[1]||(s[1]=t=>a.showPencil=!0),onPointerleave:s[2]||(s[2]=t=>a.showPencil=!1)},[g(" Group Rule: "+_(e.rule.name)+" ",1),a.showPencil?(i(),m("i",{key:0,class:"pi pi-pencil",onClick:B})):c("",!0)],32))]),subtitle:r(()=>[g(_(e.rule.uuid),1)]),content:r(()=>[x("ul",null,[(i(!0),m(X,null,W(n(w),t=>(i(),m("li",null,[t.all!==void 0?(i(),v(n(J),{key:0,"onUpdate:modelValue":[F,p=>t.all=p],modelValue:t.all,options:o.value,"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"])):c("",!0),t.missing!==void 0?(i(),v(q,{key:1,modelValue:t.missing,"onUpdate:modelValue":[p=>t.missing=p,U],"onRemove:modelValue":E},null,8,["modelValue","onUpdate:modelValue"])):c("",!0),t.exists!==void 0?(i(),v(A,{key:2,modelValue:t.exists,"onUpdate:modelValue":[p=>t.exists=p,S],"onRemove:modelValue":C},null,8,["modelValue","onUpdate:modelValue"])):c("",!0),t.match!==void 0?(i(),v(D,{key:3,modelValue:t.match,"onUpdate:modelValue":[p=>t.match=p,M]},null,8,["modelValue","onUpdate:modelValue"])):c("",!0)]))),256))]),d(n(j),{class:"",style:{"list-style":"none"},list:e.rule.rules,"item-key":"uuid",tag:"ul",onEnd:s[4]||(s[4]=t=>G(e.rule.uuid,t))},{header:r(()=>[g(" rule count: "+_(e.rule.rules.length),1)]),item:r(({element:t,index:p})=>[(i(),m("li",{class:"draggable",style:{margin:"5px"},key:t.uuid},[d(le,{rule:t},null,8,["rule"])]))]),_:1},8,["list"])]),footer:r(()=>[d(n(N),null,{start:r(()=>[d(n(Z),{label:"add",icon:"pi pi-plus",model:P.value},null,8,["model"])]),_:1})]),_:1})):c("",!0)}}),te={class:"grid"},ue={class:"col-2"},oe={key:0,class:"col"},ne={key:1,class:"col"},me=$({__name:"GroupRulesView",setup(k){const u=y();Y(()=>{u.load([{uuid:V(),name:"1st group",rules:[{uuid:V(),name:"1st rule"}]},{uuid:V(),name:"2nd group",rules:[]},{uuid:V(),name:"3rd group",rules:[]}])});const e=o=>{console.log("global clicked",o),u.setRuleSelected(o,void 0)},f=()=>{u.addGroup()};return(o,a)=>(i(),m("div",te,[x("div",ue,[d(L,{value:n(u).rules,"move-rule":n(u).moveRule,onPickGlobal:e},null,8,["value","move-rule"]),d(n(K)),d(n(ee),{onClick:f},{default:r(()=>[g("Add Rule")]),_:1})]),n(u).selectedGroupRule?(i(),m("div",oe,[d(se,{rule:n(u).selectedGroupRule},null,8,["rule"])])):n(u).selectedRule?(i(),m("div",ne,[d(h,{rule:n(u).selectedRule},null,8,["rule"])])):c("",!0)]))}});export{me as default};
